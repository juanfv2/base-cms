<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description"
        content="">
  <meta name="author"
        content="">
  <link rel="icon"
        href="/base/favicon.ico">

  <title>COMO · Bienvenido</title>

  <link rel="canonical"
        href="https://getbootstrap.com/docs/4.0/examples/cover/">

  <!-- Bootstrap core CSS -->
  <link href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css"
        rel="stylesheet">

  <!-- Custom styles for this template -->
  <style>
    /**
      * Base structure
      */

    html,
    body {
      height: 100%;
      background-color: #fff;
    }

    body {
      display: -ms-flexbox;
      display: -webkit-box;
      display: flex;
      -ms-flex-pack: center;
      -webkit-box-pack: center;
      justify-content: center;
      color: #484646;
      text-shadow: 0 .05rem .1rem rgba(0, 0, 0, .5);
      line-height: 1;
    }

    .cover-container {
      max-width: 1366px;
    }

    .cover-heading {
      color: #252323;
    }
  </style>
</head>

<body class="text-center">

  <div class="cover-container d-flex h-100 w-100 mx-auto flex-column">

    <header class="masthead mb-auto">
      <div class="inner">
        <img src="/base/assets/images/bg-header.jpg"
             alt="."
             class="img-fluid p-0">
      </div>
    </header>
    <!-- main -->
    <main role="main"
          class="inner cover">
      <!-- logo -->
      <img src="/base/assets/images/logo.png"
           alt="logo COMO"
           class="m-3">

      <!-- descriptions -->
      <div class="descriptions">
        <h1 class="cover-heading text-uppercase r-title">REESTABLECER CONTRASEÑA</h1>
        <p class="lead m-3 r-description msg-success d-none"> {{ description }}</p>
      </div>
      <!-- descriptions -->

      <!-- form -->
      <section id="auth-page"
               class="d-form">
        <div class="container">
          <div class="row justify-content-md-center mt-5">
            <div class="col-md-8">
              <div id="loader-action"
                   class="d-none">
              </div>

              <div class="card card-invoice-details form-box">
                <div class="card-body">

                  <p class="errors d-none text-white bg-danger r-description p-1">
                    {{ errors }}
                  </p>

                  <div class="text-left">

                    <div class="row">
                      <div class="col-12">
                        <div class="form-group">
                          <label for="email">Correo electrónico</label>
                          <input type="email"
                                 id="email"
                                 name="email"
                                 class="form-control"
                                 placeholder="Correo electrónico"
                                 required
                                 email
                                 readonly>
                        </div>
                      </div>
                    </div>

                    <!-- password -->
                    <div class="row">
                      <div class="col-12">
                        <div class="form-group">
                          <label for="password">Contraseña</label>
                          <input type="password"
                                 id="password"
                                 name="password"
                                 class="form-control"
                                 placeholder="Contraseña"
                                 required>
                          <p class="error-password d-none">
                            <a href="#"
                               class="text-white bg-danger">Contraseña es requerida</a>
                          </p>
                        </div>
                      </div>
                    </div>
                    <!-- end password -->
                    <!-- password_confirmation -->
                    <div class="row">
                      <div class="col-12">
                        <div class="form-group">
                          <label for="password_confirmation">Confirmar contraseña</label>
                          <input type="password"
                                 id="password_confirmation"
                                 name="password_confirmation"
                                 class="form-control"
                                 placeholder="Confirmar contraseña"
                                 required>
                          <p class="error-confirmation d-none">
                            <a href="#"
                               class="text-white bg-danger">Contraseña Confirmación es requerido</a>
                          </p>

                          <p class="error-not-equal d-none text-white bg-danger p-1">Contraseñas no coinciden
                          </p>
                        </div>
                      </div>
                    </div>
                    <!-- end password_confirmation -->

                    <div class="row">
                      <div class="col-12">

                        <button type="button"
                                class="btn btn-primary"
                                id="btn-send">
                          Restablecer la contraseña
                        </button>

                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- end form -->

    </main>

    <footer class="mastfoot mt-auto">
      <div class="inner">
        <img src="/base/assets/images/bg-footer.jpg"
             alt="."
             class="img-fluid p-0">
      </div>
    </footer>
  </div>


  <!-- Bootstrap core JavaScript
    ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="/base/assets/init.js"></script>
  <script>

    var parameters = window.location.pathname.split('/');
    var token = findGetParameter('t');
    var email = decodeURIComponent(findGetParameter('e'));
    var urlStr = reset;
    var model = {};


    $('#token').val(token);
    $('#email').val(email);

    $(document).ready(function () {
      $('#btn-send').click(function () {
        send();
      })
    })


    function send() {

      var password = $('#password').val();
      var confirmation = $('#password_confirmation').val();

      model.token = token;
      model.email = email;
      model.password = password;
      model.password_confirmation = password;

      // console.log('password', password);
      // console.log('model', model);
      console.log('urlStr', urlStr);

      if (password == '') {
        $('.error-password').addClass('d-block');
        return;
      }
      if (confirmation == '') {
        $('.error-confirmation').addClass('d-block');
        return;
      }

      if (password != confirmation) {
        $('.error-not-equal').addClass('d-block');
        return;
      }

      $.post(urlStr, model, function (data) {
        $('.r-description').html(data.message);
        $('.success').addClass('d-block');
        $('.d-form').hide();
        $('.msg-success').addClass('d-block');
      })
        .fail(function (data) {
          $('.r-description').html(data.responseJSON.message);
          $('.errors').addClass('d-block');
        });
    }



  </script>

</body>

</html>